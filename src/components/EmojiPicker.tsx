import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Smile } from "lucide-react";

interface EmojiPickerProps {
  onEmojiSelect: (emoji: string) => void;
}

const EmojiPicker = ({ onEmojiSelect }: EmojiPickerProps) => {
  const [showPicker, setShowPicker] = useState(false);

  const emojiCategories = {
    "Smileys & People": [
      "ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†", "ğŸ˜…", "ğŸ¤£", "ğŸ˜‚",
      "ğŸ™‚", "ğŸ™ƒ", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜‡", "ğŸ¥°", "ğŸ˜", "ğŸ¤©",
      "ğŸ˜˜", "ğŸ˜—", "ğŸ˜š", "ğŸ˜™", "ğŸ¥²", "ğŸ˜‹", "ğŸ˜›", "ğŸ˜œ",
      "ğŸ¤ª", "ğŸ˜", "ğŸ¤‘", "ğŸ¤—", "ğŸ¤­", "ğŸ¤«", "ğŸ¤”", "ğŸ¤",
      "ğŸ¤¨", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ˜", "ğŸ˜’", "ğŸ™„", "ğŸ˜¬",
      "ğŸ¤¥", "ğŸ˜Œ", "ğŸ˜”", "ğŸ˜ª", "ğŸ¤¤", "ğŸ˜´", "ğŸ˜·", "ğŸ¤’",
      "ğŸ¤•", "ğŸ¤¢", "ğŸ¤®", "ğŸ¤§", "ğŸ¥µ", "ğŸ¥¶", "ğŸ˜¶â€ğŸŒ«ï¸", "ğŸ˜µ",
      "ğŸ˜µâ€ğŸ’«", "ğŸ¤¯", "ğŸ¤ ", "ğŸ¥³", "ğŸ¥¸", "ğŸ˜", "ğŸ¤“", "ğŸ§"
    ],
    "Gestos": [
      "ğŸ‘", "ğŸ‘", "ğŸ‘Š", "âœŠ", "ğŸ¤›", "ğŸ¤œ", "ğŸ¤", "âœŒï¸",
      "ğŸ¤Ÿ", "ğŸ¤˜", "ğŸ‘Œ", "ğŸ¤Œ", "ğŸ¤", "ğŸ‘ˆ", "ğŸ‘‰", "ğŸ‘†",
      "ğŸ‘‡", "â˜ï¸", "âœ‹", "ğŸ¤š", "ğŸ–ï¸", "ğŸ––", "ğŸ‘‹", "ğŸ¤™",
      "ğŸ’ª", "ğŸ¦¾", "ğŸ–•", "âœï¸", "ğŸ™", "ğŸ¦¶", "ğŸ¦µ", "ğŸ‘‚"
    ],
    "CoraÃ§Ãµes": [
      "â¤ï¸", "ğŸ§¡", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ–¤", "ğŸ¤",
      "ğŸ¤", "ğŸ’”", "â¤ï¸â€ğŸ”¥", "â¤ï¸â€ğŸ©¹", "ğŸ’•", "ğŸ’", "ğŸ’“", "ğŸ’—",
      "ğŸ’–", "ğŸ’˜", "ğŸ’", "ğŸ’Ÿ", "â˜®ï¸", "âœï¸", "â˜ªï¸", "ğŸ•‰ï¸"
    ]
  };

  return (
    <div className="relative">
      <Button
        type="button"
        variant="ghost"
        size="sm"
        onClick={() => setShowPicker(!showPicker)}
        className="h-10 w-10 p-0 hover:bg-gray-100 rounded-full"
      >
        <Smile className="h-5 w-5 text-gray-600" />
      </Button>

      {showPicker && (
        <>
          {/* Overlay para fechar ao clicar fora */}
          <div
            className="fixed inset-0 z-40"
            onClick={() => setShowPicker(false)}
          />

          {/* Picker de Emojis */}
          <div className="absolute bottom-12 left-0 z-50 w-80 bg-[#2a2f32] rounded-lg shadow-2xl p-3">
            <div className="max-h-80 overflow-y-auto custom-scrollbar">
              {Object.entries(emojiCategories).map(([category, emojis]) => (
                <div key={category} className="mb-4">
                  <h3 className="text-xs text-gray-400 mb-2 font-medium">
                    {category}
                  </h3>
                  <div className="grid grid-cols-8 gap-1">
                    {emojis.map((emoji, index) => (
                      <button
                        key={index}
                        onClick={() => {
                          onEmojiSelect(emoji);
                          setShowPicker(false);
                        }}
                        className="text-2xl hover:bg-gray-700 rounded p-1 transition-colors"
                      >
                        {emoji}
                      </button>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          </div>
        </>
      )}
    </div>
  );
};

export default EmojiPicker;